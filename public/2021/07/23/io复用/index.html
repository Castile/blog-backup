<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>从网络到IO多路复用 | Castile</title><meta name="description" content="基于linux操作系统tcpdump strace man nc curl nginx 开篇-基础知识准备tcp、ip协议层 。 TCP： 面向连接的可靠的传输协议， 需要进行3次握手建立连接。   四次挥手断开连接   软件分层结构，每个层有做自己的事情，解耦合。 在linux上执行命令访问www.baidu.com 1exec 6&lt;&gt; &#x2F;dev&#x2F;tcp&#x2F;www.baidu.com&#x2F;"><meta property="og:type" content="article"><meta property="og:title" content="从网络到IO多路复用"><meta property="og:url" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/index.html"><meta property="og:site_name" content="Castile"><meta property="og:description" content="基于linux操作系统tcpdump strace man nc curl nginx 开篇-基础知识准备tcp、ip协议层 。 TCP： 面向连接的可靠的传输协议， 需要进行3次握手建立连接。   四次挥手断开连接   软件分层结构，每个层有做自己的事情，解耦合。 在linux上执行命令访问www.baidu.com 1exec 6&lt;&gt; &#x2F;dev&#x2F;tcp&#x2F;www.baidu.com&#x2F;"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596339781519.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340107335.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596338215863.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340272940.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340312930.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340347063.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340485781.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340567812.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340618884.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596342921077.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/Users/ZHLAS/AppData/Roaming/Typora/typora-user-images/1596342893175.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343177824.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343270786.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343753967.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348250812.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348180958.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348474672.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348629679.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348842591.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596350428037.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596350713176.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596351333541.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352369785.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352460918.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/Users/ZHLAS/AppData/Roaming/Typora/typora-user-images/1596352589369.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352739519.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596353886051.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596354546614.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596355176202.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596355593306.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374161025.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374461886.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374545591.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374748379.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374641173.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375190301.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375290597.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375526366.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376139195.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376468601.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376962580.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/Users/ZHLAS/AppData/Roaming/Typora/typora-user-images/1596376939382.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596378280120.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596378843696.png"><meta property="og:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596381266279.png"><meta property="article:published_time" content="2021-07-22T17:04:30.235Z"><meta property="article:modified_time" content="2021-07-25T09:08:43.486Z"><meta property="article:author" content="朱宏梁"><meta property="article:tag" content="io"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/1596339781519.png"><link rel="canonical" href="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/index.html"><link rel="alternate" href="/atom.xml" title="Castile" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/castile" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">朱宏梁</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Research &amp; Develop</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Dongguan, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">分类</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">标签</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li><li class="menu-item menu-item-books"><a href="/books"><i class="icon icon-book-fill"></i> <span class="menu-title">书单</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">友链</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">关于</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/castile" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://gitee.com/hongliangzhu" target="_blank" title="Gitee" data-toggle="tooltip" data-placement="top"><i class="icon icon-gitee"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">分类</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CleanCode/">CleanCode</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flink/">Flink</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">17</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/SpringBoot/">SpringBoot</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/SpringBoot/%E7%A7%92%E6%9D%80%E9%A1%B9%E7%9B%AE/">秒杀项目</a><span class="category-list-count">2</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaWeb/">JavaWeb</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java%E9%AB%98%E5%B9%B6%E5%8F%91/">Java高并发</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Netty/">Netty</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NiFi/">NiFi</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Problems/">Problems</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RPC/">RPC</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ZooKeeper/">ZooKeeper</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">论文阅读</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/">领域驱动设计</a><span class="category-list-count">4</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Attention/" rel="tag">Attention</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDD/" rel="tag">DDD</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flink/" rel="tag">Flink</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Http/" rel="tag">Http</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%9F%BA%E7%A1%80/" rel="tag">Java基础</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mysql/" rel="tag">Mysql</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO/" rel="tag">NIO</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Netty/" rel="tag">Netty</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NiFi/" rel="tag">NiFi</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operator-Chain/" rel="tag">Operator Chain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Pytorch/" rel="tag">Pytorch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPC/" rel="tag">RPC</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSL/" rel="tag">SSL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Servlet/" rel="tag">Servlet</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Slots/" rel="tag">Slots</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Stateless/" rel="tag">Stateless</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Thread/" rel="tag">Thread</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UVOS/" rel="tag">UVOS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VOS/" rel="tag">VOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZooKeeper/" rel="tag">ZooKeeper</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aop/" rel="tag">aop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bfs/" rel="tag">bfs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/" rel="tag">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/davis/" rel="tag">davis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dfs/" rel="tag">dfs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/" rel="tag">dp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/errors/" rel="tag">errors</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/" rel="tag">excel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flink/" rel="tag">flink</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gc/" rel="tag">gc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hosts/" rel="tag">hosts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/https/" rel="tag">https</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/io/" rel="tag">io</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java%E5%9F%BA%E7%A1%80/" rel="tag">java基础</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/juc/" rel="tag">juc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jvm/" rel="tag">jvm</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/latex/" rel="tag">latex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab/" rel="tag">matlab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mq/" rel="tag">mq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/" rel="tag">mybatis</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nifi/" rel="tag">nifi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/papers/" rel="tag">papers</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugin/" rel="tag">plugin</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/refactory/" rel="tag">refactory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rpc/" rel="tag">rpc</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-batch/" rel="tag">spring-batch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh%E5%85%8D%E5%AF%86/" rel="tag">ssh免密</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/" rel="tag">ssl</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/synchronized/" rel="tag">synchronized</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/" rel="tag">tools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/topK/" rel="tag">topK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/volatile/" rel="tag">volatile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/" rel="tag">web</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E7%AD%89/" rel="tag">中等</a><span class="tag-list-count">20</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%88%86/" rel="tag">二分</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" rel="tag">人工智能</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/" rel="tag">位操作</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" rel="tag">关键字</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" rel="tag">双指针</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8D%E5%B0%84/" rel="tag">反射</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%88%E5%B8%8C/" rel="tag">哈希</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%B0%E9%9A%BE/" rel="tag">困难</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" rel="tag">字符串</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E5%8F%91/" rel="tag">并发</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="tag">并查集</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" rel="tag">归并排序</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" rel="tag">快速排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%98%E6%9C%AF%E8%AE%BE%E8%AE%A1/" rel="tag">战术设计</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%88%98%E7%95%A5%E8%AE%BE%E8%AE%A1/" rel="tag">战略设计</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E4%BB%B6/" rel="tag">插件</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%9C%E7%B4%A2/" rel="tag">搜索</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" rel="tag">数据集</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E7%BB%84/" rel="tag">数组</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%A1%E6%8B%9B/" rel="tag">校招</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E6%9D%BF/" rel="tag">模板</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" rel="tag">消息中间件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AF%95/" rel="tag">笔试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%80%E5%8D%95/" rel="tag">简单</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E5%AD%90/" rel="tag">算子</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">28</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B/" rel="tag">线程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E7%BB%9C/" rel="tag">网络</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E5%90%88/" rel="tag">聚合</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%81%9A%E5%90%88%E7%AE%97%E5%AD%90/" rel="tag">聚合算子</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%85%BE%E8%AE%AF/" rel="tag">腾讯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%AA%E5%BF%83/" rel="tag">贪心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/" rel="tag">身份验证</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%A4%8D%E6%9D%82%E6%80%A7/" rel="tag">软件复杂性</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92/" rel="tag">递归</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8/" rel="tag">链表</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81/" rel="tag">锁</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%99%90%E7%95%8C%E4%B8%8A%E4%B8%8B%E6%96%87/" rel="tag">限界上下文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" rel="tag">领域驱动设计</a><span class="tag-list-count">4</span></li></ul></div></div><div class="widget"><h3 class="widget-title">标签云</h3><div class="widget-body tagcloud"><a href="/tags/Attention/" style="font-size:13.08px">Attention</a> <a href="/tags/DDD/" style="font-size:13.25px">DDD</a> <a href="/tags/Flink/" style="font-size:13.17px">Flink</a> <a href="/tags/Http/" style="font-size:13px">Http</a> <a href="/tags/IO/" style="font-size:13px">IO</a> <a href="/tags/JVM/" style="font-size:13px">JVM</a> <a href="/tags/Java/" style="font-size:13.92px">Java</a> <a href="/tags/JavaWeb/" style="font-size:13.25px">JavaWeb</a> <a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size:13.08px">Java基础</a> <a href="/tags/Mysql/" style="font-size:13.08px">Mysql</a> <a href="/tags/NIO/" style="font-size:13.08px">NIO</a> <a href="/tags/Netty/" style="font-size:13.33px">Netty</a> <a href="/tags/NiFi/" style="font-size:13.08px">NiFi</a> <a href="/tags/Operator-Chain/" style="font-size:13px">Operator Chain</a> <a href="/tags/Pytorch/" style="font-size:13px">Pytorch</a> <a href="/tags/RPC/" style="font-size:13.17px">RPC</a> <a href="/tags/RabbitMQ/" style="font-size:13px">RabbitMQ</a> <a href="/tags/SSL/" style="font-size:13px">SSL</a> <a href="/tags/Servlet/" style="font-size:13px">Servlet</a> <a href="/tags/Slots/" style="font-size:13px">Slots</a> <a href="/tags/SpringBoot/" style="font-size:13.08px">SpringBoot</a> <a href="/tags/Stateless/" style="font-size:13px">Stateless</a> <a href="/tags/Thread/" style="font-size:13.08px">Thread</a> <a href="/tags/UVOS/" style="font-size:13.17px">UVOS</a> <a href="/tags/VOS/" style="font-size:13px">VOS</a> <a href="/tags/ZooKeeper/" style="font-size:13.08px">ZooKeeper</a> <a href="/tags/aop/" style="font-size:13px">aop</a> <a href="/tags/bfs/" style="font-size:13px">bfs</a> <a href="/tags/blog/" style="font-size:13px">blog</a> <a href="/tags/centos/" style="font-size:13px">centos</a> <a href="/tags/davis/" style="font-size:13px">davis</a> <a href="/tags/dfs/" style="font-size:13.42px">dfs</a> <a href="/tags/dp/" style="font-size:13.17px">dp</a> <a href="/tags/errors/" style="font-size:13.17px">errors</a> <a href="/tags/excel/" style="font-size:13px">excel</a> <a href="/tags/flink/" style="font-size:13px">flink</a> <a href="/tags/gc/" style="font-size:13.08px">gc</a> <a href="/tags/hosts/" style="font-size:13px">hosts</a> <a href="/tags/https/" style="font-size:13px">https</a> <a href="/tags/io/" style="font-size:13px">io</a> <a href="/tags/java%E5%9F%BA%E7%A1%80/" style="font-size:13px">java基础</a> <a href="/tags/juc/" style="font-size:13px">juc</a> <a href="/tags/jvm/" style="font-size:13.33px">jvm</a> <a href="/tags/latex/" style="font-size:13px">latex</a> <a href="/tags/linux/" style="font-size:13.08px">linux</a> <a href="/tags/matlab/" style="font-size:13px">matlab</a> <a href="/tags/maven/" style="font-size:13px">maven</a> <a href="/tags/mq/" style="font-size:13px">mq</a> <a href="/tags/mybatis/" style="font-size:13.5px">mybatis</a> <a href="/tags/mysql/" style="font-size:13.25px">mysql</a> <a href="/tags/nifi/" style="font-size:13px">nifi</a> <a href="/tags/papers/" style="font-size:13.67px">papers</a> <a href="/tags/plugin/" style="font-size:13.17px">plugin</a> <a href="/tags/redis/" style="font-size:13.17px">redis</a> <a href="/tags/refactory/" style="font-size:13px">refactory</a> <a href="/tags/rpc/" style="font-size:13.08px">rpc</a> <a href="/tags/spring/" style="font-size:13.17px">spring</a> <a href="/tags/spring-batch/" style="font-size:13px">spring-batch</a> <a href="/tags/ssh%E5%85%8D%E5%AF%86/" style="font-size:13px">ssh免密</a> <a href="/tags/ssl/" style="font-size:13.08px">ssl</a> <a href="/tags/synchronized/" style="font-size:13px">synchronized</a> <a href="/tags/tools/" style="font-size:13px">tools</a> <a href="/tags/topK/" style="font-size:13px">topK</a> <a href="/tags/volatile/" style="font-size:13px">volatile</a> <a href="/tags/web/" style="font-size:13px">web</a> <a href="/tags/%E4%B8%AD%E7%AD%89/" style="font-size:13.83px">中等</a> <a href="/tags/%E4%BA%8C%E5%88%86/" style="font-size:13px">二分</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size:13px">二叉树</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size:13.17px">人工智能</a> <a href="/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/" style="font-size:13px">位操作</a> <a href="/tags/%E5%85%B3%E9%94%AE%E5%AD%97/" style="font-size:13px">关键字</a> <a href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88/" style="font-size:13px">双指针</a> <a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size:13px">反射</a> <a href="/tags/%E5%93%88%E5%B8%8C/" style="font-size:13px">哈希</a> <a href="/tags/%E5%9B%B0%E9%9A%BE/" style="font-size:13.42px">困难</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size:13.17px">多线程</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size:13.08px">字符串</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size:13px">并发</a> <a href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size:13.42px">并查集</a> <a href="/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" style="font-size:13.08px">归并排序</a> <a href="/tags/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/" style="font-size:13px">快速排序</a> <a href="/tags/%E6%88%98%E6%9C%AF%E8%AE%BE%E8%AE%A1/" style="font-size:13px">战术设计</a> <a href="/tags/%E6%88%98%E7%95%A5%E8%AE%BE%E8%AE%A1/" style="font-size:13px">战略设计</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:13px">排序</a> <a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size:13.17px">插件</a> <a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size:13.33px">搜索</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:13.08px">数学</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:13px">数据结构</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" style="font-size:13px">数据集</a> <a href="/tags/%E6%95%B0%E7%BB%84/" style="font-size:13.33px">数组</a> <a href="/tags/%E6%A0%A1%E6%8B%9B/" style="font-size:13px">校招</a> <a href="/tags/%E6%A8%A1%E6%9D%BF/" style="font-size:13px">模板</a> <a href="/tags/%E6%B6%88%E6%81%AF%E4%B8%AD%E9%97%B4%E4%BB%B6/" style="font-size:13px">消息中间件</a> <a href="/tags/%E7%AC%94%E8%AF%95/" style="font-size:13px">笔试</a> <a href="/tags/%E7%AE%80%E5%8D%95/" style="font-size:13.58px">简单</a> <a href="/tags/%E7%AE%97%E5%AD%90/" style="font-size:13px">算子</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:14px">算法</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size:13px">线程</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size:13px">网络</a> <a href="/tags/%E8%81%9A%E5%90%88/" style="font-size:13px">聚合</a> <a href="/tags/%E8%81%9A%E5%90%88%E7%AE%97%E5%AD%90/" style="font-size:13px">聚合算子</a> <a href="/tags/%E8%85%BE%E8%AE%AF/" style="font-size:13px">腾讯</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:13.33px">设计模式</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size:13px">贪心</a> <a href="/tags/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/" style="font-size:13px">身份验证</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%A4%8D%E6%9D%82%E6%80%A7/" style="font-size:13px">软件复杂性</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size:13.75px">递归</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size:13.17px">链表</a> <a href="/tags/%E9%94%81/" style="font-size:13px">锁</a> <a href="/tags/%E9%99%90%E7%95%8C%E4%B8%8A%E4%B8%8B%E6%96%87/" style="font-size:13px">限界上下文</a> <a href="/tags/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" style="font-size:13.25px">领域驱动设计</a></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a><span class="archive-list-count">12</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/NiFi/">NiFi</a></p><p class="item-title"><a href="/2023/11/26/Stateless-NiFi/" class="title">无状态的NiFi</a></p><p class="item-date"><time datetime="2023-11-26T07:35:13.000Z" itemprop="datePublished">2023-11-26</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/NiFi/">NiFi</a></p><p class="item-title"><a href="/2023/10/15/NiFi%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83%E9%AA%8C%E8%AF%81%EF%BC%882%EF%BC%89/" class="title">NiFi身份验证与授权验证（2）</a></p><p class="item-date"><time datetime="2023-10-15T10:33:05.000Z" itemprop="datePublished">2023-10-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/NiFi/">NiFi</a></p><p class="item-title"><a href="/2023/10/14/NiFi%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E4%B8%8E%E6%8E%88%E6%9D%83%E9%AA%8C%E8%AF%81%EF%BC%881%EF%BC%89/" class="title">NiFi身份验证与授权验证（1）</a></p><p class="item-date"><time datetime="2023-10-14T15:59:46.000Z" itemprop="datePublished">2023-10-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/RPC/">RPC</a></p><p class="item-title"><a href="/2023/10/08/castile-rpc%E6%A1%86%E6%9E%B6%EF%BC%9A%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0RPC%E7%9A%84%E8%B0%83%E7%94%A8%E5%92%8C%E5%A4%84%E7%90%86/" class="title">castile-rpc框架：动态代理实现RPC的调用和处理</a></p><p class="item-date"><time datetime="2023-10-08T14:55:44.000Z" itemprop="datePublished">2023-10-08</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/RPC/">RPC</a></p><p class="item-title"><a href="/2023/09/27/castile-rpc%E6%A1%86%E6%9E%B6%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86-%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E5%92%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/" class="title">castile-rpc框架：服务治理-服务发现和负载均衡</a></p><p class="item-date"><time datetime="2023-09-27T15:25:00.000Z" itemprop="datePublished">2023-09-27</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Elinux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.</span> <span class="toc-text">基于linux操作系统</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E7%AF%87-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87"><span class="toc-number">2.</span> <span class="toc-text">开篇-基础知识准备</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E6%8A%93%E5%8C%85"><span class="toc-number">3.</span> <span class="toc-text">使用工具抓包</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NetCat"><span class="toc-number">4.</span> <span class="toc-text">NetCat</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">4.2.</span> <span class="toc-text">参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"><span class="toc-number">4.3.</span> <span class="toc-text">监听端口</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#strace"><span class="toc-number">5.</span> <span class="toc-text">strace</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8system-call"><span class="toc-number">6.</span> <span class="toc-text">系统调用system call</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#BIO"><span class="toc-number">6.1.</span> <span class="toc-text">BIO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NIO"><span class="toc-number">6.2.</span> <span class="toc-text">NIO</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select"><span class="toc-number">6.3.</span> <span class="toc-text">select</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#epoll"><span class="toc-number">6.4.</span> <span class="toc-text">epoll</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%99%84%EF%BC%9A%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B%E5%9B%BE%E7%A4%BA"><span class="toc-number">7.</span> <span class="toc-text">附：发展历程图示</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-number">8.</span> <span class="toc-text">参考资料</span></a></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-io复用" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">从网络到IO多路复用</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2021/07/23/io%E5%A4%8D%E7%94%A8/" class="article-date"><time datetime="2021-07-22T17:04:30.235Z" itemprop="datePublished">2021-07-23</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/Redis/">Redis</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/io/" rel="tag">io</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2021/07/23/io%E5%A4%8D%E7%94%A8/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 4.9k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 19(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h1 id="基于linux操作系统"><a href="#基于linux操作系统" class="headerlink" title="基于linux操作系统"></a>基于linux操作系统</h1><p>tcpdump</p><p>strace</p><p>man</p><p>nc</p><p>curl</p><p>nginx</p><h1 id="开篇-基础知识准备"><a href="#开篇-基础知识准备" class="headerlink" title="开篇-基础知识准备"></a>开篇-基础知识准备</h1><p>tcp、ip协议层 。</p><p>TCP： 面向连接的可靠的传输协议， 需要进行3次握手建立连接。</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596339781519.png" width="1596339781519"><p>四次挥手断开连接</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340107335.png" width="1596340107335"><p>软件分层结构，每个层有做自己的事情，解耦合。</p><p>在linux上执行命令访问<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exec</span> 6&lt;&gt; /dev/tcp/www.baidu.com/80</span><br></pre></td></tr></table></figure><blockquote><p><code>exec</code>: 将一个程序覆盖当前进程，即将此程序压栈，如果程序执行完是退出，则会让内核触发，将整个进程销毁，断开连接</p><p>6: 文件描述符，可以自己定义</p><p>&lt;&gt;: 重定向操作符， 表示输入输出</p><p>/dev/tcp/<a target="_blank" rel="noopener" href="http://www.baidu.com/80">www.baidu.com/80</a> ： 虚拟文件系统</p><p>0 输入流 1 正确输出流 2 报错输出</p></blockquote><p>当前bash里面多了一个6号文件描述符，指向了一个socket， /dev/tcp/<a target="_blank" rel="noopener" href="http://www.baidu.com/80%E4%B8%BA%E7%89%B9%E6%AE%8A%E7%9B%AE%E5%BD%95%EF%BC%8C%E8%A7%A6%E5%8F%91%E4%B8%80%E4%B8%AA%E5%86%85%E6%A0%B8%E6%9C%BA%E5%88%B6%EF%BC%8C%E8%AE%A9bash%E5%8F%91%E8%B5%B7%E4%BA%86%E5%AF%B9%E7%99%BE%E5%BA%A6socket%E7%9A%84%E8%BF%9E%E6%8E%A5">www.baidu.com/80为特殊目录，触发一个内核机制，让bash发起了对百度socket的连接</a> 。</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596338215863.png" width="1596338215863"><p>与百度建立了socket连接后怎么获取百度的主页呢？socket建立表示TCP连接已经建立了，然后应该使用协议来进行交互。是应用层的操作，所以我们需要发送HTTP协议请求头</p><p>http协议请求头</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;GET / HTTP/1.0\n&quot;</span>      -e使得bash能识别换行符</span><br><span class="line"><span class="comment"># 将请求头发送到百度服务器</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;GET/HTTP/1.0\n&quot;</span> 1&gt;&amp;8 <span class="comment"># 1 是输出，表示将输出重定向到 6中， 如果重定向后面是一个文件描述符的话，需要加一个 &amp; </span></span><br><span class="line"><span class="comment"># 读取响应信息</span></span><br><span class="line">cat 0&lt;&amp;8</span><br></pre></td></tr></table></figure><h1 id="使用工具抓包"><a href="#使用工具抓包" class="headerlink" title="使用工具抓包"></a>使用工具抓包</h1><p>使用tcpdump工具</p><p>安装：yum install tcpdump</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340272940.png" width="1596340272940"><p>查看网卡 ifconfig</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340312930.png" width="1596340312930"><p>看一下tcpdump如何使用： tcpdump –help</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340347063.png" width="1596340347063"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -nn -i ens33 port 80  <span class="comment"># 监听80端口的时间 在网卡 ens33 上</span></span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340485781.png" width="1596340485781"><p>目前还没有，是一个阻塞状态</p><p>然后我们去访问一下百度 curl ， 重开一个ssh</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340567812.png" width="1596340567812"><p>在刚刚的侦听界面上：</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596340618884.png" width="1596340618884"><p>分析一下, 先看建立连接，也就是前三行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">11:55:43.617175 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [S], seq 3681486933, win 29200, options [mss 1460,sackOK,TS val 41257007 ecr 0,nop,wscale 7], length 0</span><br><span class="line"></span><br><span class="line">表示本机给百度发送了一个 seq ，后面的数字表示序列号。 S 表示 sync</span><br><span class="line"></span><br><span class="line">11:55:43.845875 IP 104.193.88.77.80 &gt; 192.168.145.130.51914: Flags [S.], seq 1297381438, ack 3681486934, win 64240, options [mss 1460], length 0</span><br><span class="line"></span><br><span class="line">接着百度给本机发送 了一个 sync+ ack的包。</span><br><span class="line"></span><br><span class="line">11:55:43.845926 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [.], ack 1, win 29200, length 0</span><br><span class="line"></span><br><span class="line">然后本地给百度回复了一个 ack 确认</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>以上就是TCP建立连接的三次握手过程，完成建立后，双方开辟资源。</p><p>接着看中间几行表示本机与百度进行数据传输的过程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">11:55:43.846291 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [P.], seq 1:78, ack 1, win 29200, length 77: HTTP: GET / HTTP/1.1</span><br><span class="line"></span><br><span class="line">本机给百度发送了一个数据包 长度为77  协议HTTP/1.1  以GET的方式请求</span><br><span class="line"></span><br><span class="line">11:55:43.846412 IP 104.193.88.77.80 &gt; 192.168.145.130.51914: Flags [.], ack 78, win 64240, length 0</span><br><span class="line"></span><br><span class="line">百度给本就回复一个确认 ack， 因为是可靠传输</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11:55:44.386992 IP 104.193.88.77.80 &gt; 192.168.145.130.51914: Flags [P.], seq 1:2782, ack 78, win 64240, length 2781: HTTP: HTTP/1.1 200 OK</span><br><span class="line"></span><br><span class="line">接着是百度个本机返回单的响应数据  长度为2781  状态码 200 表示成功</span><br><span class="line">上面两个都是百度发出的，最后有一个P表示，数据发送完了，不要存储在缓存中了，请马上告知应用程序去处理。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11:55:44.387030 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [.], ack 2782, win 33580, length 0</span><br><span class="line"></span><br><span class="line">本机给百发送ack确认，表示已经收到</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>发送完数据之后，接着是断开连接，也就是四次挥手的过程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">11:55:44.387247 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [F.], seq 78, ack 2782, win 33580, length 0</span><br><span class="line"></span><br><span class="line">本机需要断开连接  fin</span><br><span class="line"></span><br><span class="line">11:55:44.387563 IP 104.193.88.77.80 &gt; 192.168.145.130.51914: Flags [.], ack 79, win 64239, length 0</span><br><span class="line"></span><br><span class="line">百度返回给客户端一个ack，表示知道了你要断开连接。但是这时还没有完全断开，是一个半关闭的转态。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11:55:45.280826 IP 104.193.88.77.80 &gt; 192.168.145.130.51914: Flags [FP.], seq 2782, ack 79, win 64239, length 0</span><br><span class="line"></span><br><span class="line">百度的服务器也要断开连接了，给本机发送了一个fin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11:55:45.280853 IP 192.168.145.130.51914 &gt; 104.193.88.77.80: Flags [.], ack 2783, win 33580, length 0</span><br><span class="line">本机知道了，然后断开</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过以上分析，我们以及知道从客户端发起请求建立连接到传输数据再到四次挥手断开连接的全过程。这一整个过程应该是一个完整的粒度，不应该被拆散。</p><p>比如，我们做负载均衡的时候，客户端给一个服务器发送了一个建立连接的请求数据包sync， 然后这个服务器返回一个sync+ack给客户端，客户端还需要发送一个ack给服务器，但是由于有多台服务器，负载均衡会选择一个最佳的服务器，可能会出现这样的一种情况，就是客户端的ack发送给了另外一台服务器，而原来的这个服务器一直没有收到客户端的ack，所以这个连接就建立不起来。这就是粒度被拆散了。</p><p>这个粒度不能被我们以后所学的技术所拆散的！！！这是一个大前提。</p><h1 id="NetCat"><a href="#NetCat" class="headerlink" title="NetCat"></a>NetCat</h1><p>nc是netcat工具的命令，是一个很好用的网络工具。比如，可以用来端口扫描，文件传输等网络功能。 在 网络工具中有“瑞士军刀”美誉的NetCat， 在我们用了N年了至今仍是爱不释手。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nc</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596342921077.png" width="1596342921077"><h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/Users\ZHLAS\AppData\Roaming\Typora\typora-user-images\1596342893175.png" alt="1596342893175"></p><h2 id="监听端口"><a href="#监听端口" class="headerlink" title="监听端口"></a>监听端口</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc -l 8080  <span class="comment"># 开启服务端</span></span><br><span class="line">nc localhost 8080 <span class="comment"># 开启客户端</span></span><br></pre></td></tr></table></figure><p>他们之间就建立了连接，可以相互发送数据</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343177824.png" width="1596343177824"><p>查看他们的进程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nc</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343270786.png" width="1596343270786"><p>然后我们用上面的提到的，在 /proc/进程id/fd 目录下面下有进程描述符：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> proc/102514/fd</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596343753967.png" width="1596343753967"><h1 id="strace"><a href="#strace" class="headerlink" title="strace"></a>strace</h1><blockquote><p>yum install strace</p></blockquote><p>用来跟踪程序的运行以及系统调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir xxoo  <span class="comment"># 创建一个新文件夹，用来存放程序运行的跟踪文件</span></span><br><span class="line"><span class="built_in">cd</span> xxoo</span><br><span class="line">trace -ff -o out nc -l 8080 <span class="comment"># 跟踪这个程序</span></span><br></pre></td></tr></table></figure><p>然后在xxoo目录下有一个文件 out-4781 , 后面的id表示nc的进程id</p><p>打开这个文件：</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348250812.png" width="1596348250812"><p>查看select的作用： man 2 select</p><p>select是一个多路复用器，会阻塞</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348180958.png" width="1596348180958"><p>使用 tail命令去动态查看文件的变化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f out.4781</span><br></pre></td></tr></table></figure><p>打开一个客户端 nv localhost 8080</p><p>发送一些信息</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348474672.png" width="1596348474672"> <img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348629679.png" width="1596348629679"><p>write(1, “zhuhongliang\n”, 13) = 13 表示在 文件描述符1 写入 。1代表标准写</p><p>看一下recvfrom 的功能：从一个socket接受数据data，返回数据的字节数</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596348842591.png" width="1596348842591"><h1 id="系统调用system-call"><a href="#系统调用system-call" class="headerlink" title="系统调用system call"></a>系统调用system call</h1><p>read、write、 socket、 bind、listen、accept</p><p>上述系统方法的实现是在linux kernel里面的实现的。kernel只会对应用程序暴露上述方法的调用，所以程序会对系统内核发起系统调用。</p><h2 id="BIO"><a href="#BIO" class="headerlink" title="BIO"></a>BIO</h2><p>如果程想使用内核完成网络通信的话，这时候会发生哪些事情呢？</p><p>看看下面的过程</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596350428037.png" width="1596350428037"><p>首先服务端系统调用kernel，socket获取服务端的文件描述符 5，然后使用bind将文件描述符与端口8080进行绑定，之后监听看有没有连接。</p><p>这时候，一个客户端也进行系统调用，经过三次握手之后连接了服务端，服务端系统调用accept， 建立连接 。客户端的文件描述符加入是fd 4 。 然后调用read 读操作，传入客户端的文件描述符4 。但是这个客户端没有发送数据，所以这个read现在被阻塞住了。</p><p>此时又有一个客户端来连接</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596350713176.png" width="1596350713176"><p>建立完连接后，这时候不会给他分配文件描述符，因为程序已经被阻塞住了，只能运行到accept这个阶段，如果客户端有超时响应的话，会报超时连接错误。</p><p>这是整个IO 发展历程中的第一个时期：BIO，即阻塞IO。</p><p>那么，我们怎么解决这个问题呢？ 可以开辟一个线程。</p><p>一旦出现了一个连接，就分配一个文件描述符，然后开辟一个线程。</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596351333541.png" width="1596351333541"><p>如果有线程来<code>read</code>了，就启动线程，否则阻塞。上述就是多线程模型。</p><p>这样已经解决服务端无法处理多个客户端连接请求的问题了，但这种多线程模型有什么缺点或者说弊端呢？</p><p>思考一下如果有100000个客户端，那么是不是要与100000个线程的开辟？？？</p><p>这就开销太大了吧。</p><p>我们首先看一下java程序在linux 系统中是如何调用的</p><p>写一个简单的java程序</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352369785.png" width="1596352369785"><p>使用是strace 追踪系统调用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strace -ff -o xxoo java Hello</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352460918.png" width="1596352460918"><p>可以看到，这样一个简单的java程序并不是只开辟了一个线程。打开113151</p><p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/Users\ZHLAS\AppData\Roaming\Typora\typora-user-images\1596352589369.png" alt="1596352589369"></p><p>发现调用了113152线程， 并且使用的系统调用<code>clone</code></p><p>那 我们的主线程是哪个，主线程应该是打印Hello world的那个线程吧</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;Hello world&quot;</span> ./*</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596352739519.png" width="1596352739519"><p>看到了write系统调用了吗。这是在113152线程中。</p><p>我们可以得出一个结论，线程的创建是通过调用内核的clone系统调用来实现的，主线程都需要clone，然后如果有成千上万个线程的话，就要进行成千上万次系统调用，这个开销很非常大的。因为调用内核不是直接就调用的，需要发生软中断，而且CPU也要切换状态。</p><h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><p>在BIO时期这一切万恶之源都是由于系统调用会有阻塞的情况发生，如果一个客户端没有发送数据，就会阻塞。虽然多线程模型可以处理多个客户端的情况，但是由于开销大，系统调用此时多，比较慢。</p><p>那么能不能只创建一个线程就可以处理多个客户端呢？</p><p>我们看看socket： <code>man 2 socket</code></p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596353886051.png" width="1596353886051"><blockquote><p>SOCK_NONBLOCK : Set the O_NONBLOCK file status flag on the new open file description. Using this flag saves extra calls to fcntl(2) to achieve the same result</p></blockquote><p>可以使用非阻塞，fcntl来指定非阻塞的文件描述符</p><p>==所以，内核需要发生变化==</p><p>下面的模型非阻塞的NIO （NON- Block IO）</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596354546614.png" width="1596354546614"><p>在客户端只需要写一个死循环，然后有一个客户端的文件描述符解accept，如果没有数据传输，就报错，然后程序可以继续执行。这样的模型也有弊端。</p><p>试想一下，如果有10000个客户端，一次循环就进行10000次系统调用，那么如果只有第10000个客户端有数据传输，那这样的开销会很大。</p><p>有没有什么解决方法呢？ 如果能把多次系统调用变成一次系统调用那就好啦！！！</p><p>怎么做？==内核又需要变化了==</p><h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p>上面我们提到了select。看看<code>select</code> ： man 2 select</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596355176202.png" width="1596355176202"><blockquote><p>select() and pselect() allow a program to monitor multiple file descriptors, waiting until one or more of the file descriptors become “ready” for some class of I/O operation (e.g., input possible). A file descriptor is considered ready if it is possible to perform the corresponding I/O operation (e.g., read(2)) without blocking.</p><p>select()和pselect()允许程序监视多个文件描述符，直到其中一个或多个文件描述符为某些类型的I/O操作(例如，输入)“准备好”。如果文件描述符可以不阻塞地执行相应的I/O操作(如read(2))，则认为它已经准备好了。</p></blockquote><p>下面是使用了select或者poll的模型</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596355593306.png" width="1596355593306"><p>将各个客户端的文件描述符给select，然后select会去主动遍历每一个文件描述符，哪个有数据输出就返回哪个文件描述符，然后通过系统调用read去读取。这样的话就只用以一次系统调用就把需要read的文件描述符选择出来了，比上面的需要非常多的系统调用模型更加优秀。另外，select是系统调用，会主动遍历每一个文件操作符，时间复杂度为O(N)。</p><p>这还没有完，这种模型还没有很优美，虽然减少了系统调用，但是select里面的轮询还是O(N)的，这该怎么改进呢？</p><p>epoll终于来了！！！</p><h2 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h2><p>讲epoll之前先来看看<code>nginx</code>，看看nginx怎么工作的。</p><p>首先需要安装nginx： <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37345604/article/details/90034424">https://blog.csdn.net/qq_37345604/article/details/90034424</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.9.9.tar.gz  </span><br><span class="line">tar -zxvf  nginx-1.9.9.tar.gz</span><br><span class="line"><span class="built_in">cd</span> nginx目录</span><br><span class="line">./configure</span><br><span class="line"> </span><br><span class="line">make</span><br><span class="line"> </span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>运行nginx在 usr/local/nginx/sbin 目录下</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374161025.png" width="1596374161025"><p>我们来看看nginx有多少个线程，不出意外的话，应该是两个，一个是master，一个是worker。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strace -ff -o out ./nginx</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374461886.png" width="1596374461886"><p>我们看看对应的out下有多少文件</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374545591.png" width="1596374545591"><p>可以看到有3635、3636、3637三个进程，不应该是两个吗？？？</p><p>我们来看看3635这个进程：</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374748379.png" width="1596374748379"><p>这个进程只是启动进程，最后是退出了的，它clone了3636进程， 然后3636进程clone了3637进程，如下图。</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596374641173.png" width="1596374641173"><p>所以他们是父子关系。 3635–&gt; 3636 –&gt; 3637。 因为3636是master进程，可以看到他其实没有做什么事情， 就是将3637 worker进程clone出来了。</p><p>其实一开始文件描述符是在3635进程，也就是启动线程就去确定了，通过clone将文件描述符带给3636进程， 3636又带去3637进程</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375190301.png" width="1596375190301"><p>再看看3637进程</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375290597.png" width="1596375290597"><p>文件描述符6 放进了8 里面，8 是上面的<code>epoll_create</code>创建出来的。</p><p>那么epoll_create 是干嘛的，运行命令 man 2 epoll_create 查看系统调用</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596375526366.png" width="1596375526366"><blockquote><p>epoll_create() returns a file descriptor referring to the new epoll instance. This file descriptor is used for all the subsequent calls to the epoll interface. When no longer required, the file descriptor returned by epoll_create() should be closed by using close(2). When all file descriptors referring to an epoll instance have been closed, the kernel destroys the instance and releases the associated resources for reuse.</p><p>epoll_create()返回引用新epoll实例的文件描述符。<strong>此文件描述符用于随后对epoll接口的所有调用。</strong>当不再需要时，应该使用close(2)关闭epoll_create()返回的文件描述符。当引用epoll实例的所有文件描述符都被关闭时，内核会销毁该实例并释放相关的资源以供重用。</p></blockquote><p>其实系统调用<code>epoll_create()</code> 在内核中开辟一个空间， 使用文件描述符指向这个空间。然后通过epoll_ctl(8, 6) 将文件描述符6放进 8里面。然后epoll_wait(8, 等待， 开始阻塞。</p><p><code>epoll_wait</code>会返回有数据输出的文件描述符数量。</p><blockquote><p>The epoll_wait() system call waits for events on the epoll(7) instance referred to by the file descriptor epfd. The memory area pointed to by events will contain the events that will be available for the caller. Up to maxevents are returned by epoll_wait(). The maxevents argument must be greater than zero.</p><p>The timeout argument specifies the minimum number of milliseconds that epoll_wait() will block. (This interval will be rounded up to the system clock granularity, and kernel scheduling delays mean that the blocking interval may overrun by a small amount.) Specifying a timeout of -1 causes epoll_wait() to block indefinitely, while specifying a timeout equal to zero cause epoll_wait() to return immediately, even if no events are available.</p><p>RETURN VALUE( 返回值 )<br>When successful, epoll_wait() returns the number of file descriptors ready for the requested I/O, or zero if no file descriptor became ready during the requested timeout milliseconds. When an error occurs, epoll_wait() returns -1 and errno is set appropriately.</p></blockquote><blockquote><p>epoll_wait()系统调用等待文件描述符epfd引用的epoll(7)实例上的事件。事件指向的内存区域将包含调用者可用的事件。epoll_wait()返回最多maxevents。maxevents参数必须大于零。</p><p>超时参数指定epoll_wait()将阻塞的最小毫秒数。(这个时间间隔将被舍入到系统时钟粒度，内核调度延迟意味着阻塞时间间隔可能会超出一小部分。)将超时指定为-1将导致epoll_wait()无限期阻塞，而将超时指定为0将导致epoll_wait()立即返回，即使没有可用的事件。</p><p>成功时，epoll_wait()返回为请求的I/O准备好的文件描述符的数量，如果在请求的超时毫秒期间没有文件描述符准备好，则返回0。当发生错误时，epoll_wait()返回-1,errno被适当地设置。</p></blockquote><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376139195.png" width="1596376139195"><p>我们来模拟一下访问，目前3637进程是阻塞的，因为没有客户端来连接。</p><p>使用tail命令去查看动态的文件变化</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376468601.png" width="1596376468601"><p>使用curl来模拟访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl localhost 80</span><br></pre></td></tr></table></figure><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596376962580.png" width="1596376962580"><p>out文件的变化</p><p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/Users\ZHLAS\AppData\Roaming\Typora\typora-user-images\1596376939382.png" alt="1596376939382"></p><p>主要看看这几句</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">accept4(6, &#123;sa_family=AF_INET, sin_port=htons(34306), sin_addr=inet_addr(<span class="string">&quot;127.0.0.1&quot;</span>)&#125;, [110-&gt;16], SOCK_NONBLOCK) = 3</span><br><span class="line"></span><br><span class="line">一个客户端请求后，首先系统调用accept(6, ...)，6是服务端的文件描述符，客户端的文件描述符是3</span><br><span class="line"></span><br><span class="line">epoll_ctl(8, EPOLL_CTL_ADD, 3, &#123;EPOLLIN|EPOLLRDHUP|EPOLLET, &#123;u32=4200120752, u64=139994364166576&#125;&#125;) = 0</span><br><span class="line"> 紧接着 将3放进8 里面去，这时候还没有客户端的数据流出</span><br><span class="line"></span><br><span class="line">epoll_wait(8, [&#123;EPOLLIN, &#123;u32=4200120752, u64=139994364166576&#125;&#125;], 512, 60000) = 1</span><br><span class="line">epoll_wait 去监听8 里面的文件描述符的 数据到达事件</span><br><span class="line"></span><br><span class="line">recvfrom(3, <span class="string">&quot;GET / HTTP/1.1\r\nUser-Agent: curl&quot;</span>..., 1024, 0, NULL, NULL) = 73</span><br><span class="line"></span><br><span class="line">有事件到达了， 收到的数据是从文件描述3发来的</span><br><span class="line"></span><br><span class="line"><span class="built_in">stat</span>(<span class="string">&quot;/usr/local/nginx/html/index.html&quot;</span>, &#123;st_mode=S_IFREG|0644, st_size=612, ...&#125;) = 0</span><br><span class="line"></span><br><span class="line">判断是请求主页的</span><br><span class="line"></span><br><span class="line">open(<span class="string">&quot;/usr/local/nginx/html/index.html&quot;</span>, O_RDONLY|O_NONBLOCK) = 10</span><br><span class="line">打开主页的文件， 文件描述符是10</span><br><span class="line"></span><br><span class="line">fstat(10, &#123;st_mode=S_IFREG|0644, st_size=612, ...&#125;) = 0</span><br><span class="line">查看文件描述符10 的状态</span><br><span class="line"></span><br><span class="line">writev(3, [&#123;iov_base=<span class="string">&quot;HTTP/1.1 200 OK\r\nServer: nginx/1&quot;</span>..., iov_len=237&#125;], 1) = 237</span><br><span class="line">返回给文件描述符3 的数据，给3写入</span><br><span class="line"></span><br><span class="line">sendfile(3, 10, [0] =&gt; [612], 612)      = 612</span><br><span class="line">发送数据 将10 发送给3 </span><br><span class="line">write(4, <span class="string">&quot;127.0.0.1 - - [02/Aug/2020:22:01&quot;</span>..., 86) = 86</span><br><span class="line">写的时间</span><br><span class="line">close(10)     = 0</span><br><span class="line">关闭文件描述符10</span><br><span class="line">setsockopt(3, SOL_TCP, TCP_NODELAY, [1], 4) = 0</span><br><span class="line">recvfrom(3, <span class="string">&quot;&quot;</span>, 1024, 0, NULL, NULL)    = 0</span><br><span class="line">close(3)  <span class="comment">#  连接断开就会关闭文件描述符3                </span></span><br></pre></td></tr></table></figure><p>我们也可以使用nc 来模拟多个客户端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nc localhost 80  <span class="comment"># 客户端1</span></span><br><span class="line">nc localhost 80 <span class="comment"># 客户端2</span></span><br></pre></td></tr></table></figure><p>这是out文件的变化，可以看到有两个文件描述符加入8 中</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596378280120.png" width="1596378280120"><p>所以，所有的连接只需要通过epoll_ctl（8， ）放入8一次，未来就连续调用epoll_wait来监听那个文件描述符有数据到达， 对于文件描述符6来说，等待的是accept事件，对于3、10 等其他的客户端的文件描述符是等待read，一旦监听到了，就将这个文件描述符放入一个集合中。</p><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596378843696.png" width="1596378843696"><p>这样的模型不像select会一次将10000个文件描述符拷贝给内核，内核开辟了一个空间，来了一个客户端就通过epoll_ctl将文件描述符放入到指定的区域里面，只要连接不断开，那么可以通过epoll_wait获取到客户端的所有事件。</p><p>内核是被动的，中断的事件会让8 里面的文件描述符进入到右边的返回区，然后主程序就是一个epol_wait死循环，一直判断返回区里面有没有事件。</p><p>零拷贝： sendFile系统调用</p><p>直接内存</p><h1 id="附：发展历程图示"><a href="#附：发展历程图示" class="headerlink" title="附：发展历程图示"></a>附：发展历程图示</h1><img src="/2021/07/23/io%E5%A4%8D%E7%94%A8/1596381266279.png" width="1596381266279"><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ol><li><a target="_blank" rel="noopener" href="https://cyc2018.github.io/CS-Notes/#/notes/Socket">https://cyc2018.github.io/CS-Notes/#/notes/Socket</a></li></ol></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://castile.github.io/2021/07/23/io%E5%A4%8D%E7%94%A8/" title="从网络到IO多路复用" target="_blank" rel="external">https://castile.github.io/2021/07/23/io复用/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/castile" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/castile" target="_blank"><span class="text-dark">朱宏梁</span><small class="ml-1x">Research &amp; Develop</small></a></h3><div>后端开发工程师</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2021/07/23/java%E9%94%81%E6%9C%BA%E5%88%B6/" title="Java中的各种锁机制"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/2020/10/05/%E5%8C%BA%E9%97%B4%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95/" title="区间调度算法"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button"><span>[&nbsp;</span><span>文章目录</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>感谢您的支持，我会继续努力的!</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipay.jpg" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/weixin.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/castile" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="https://gitee.com/hongliangzhu" target="_blank" title="Gitee" data-toggle="tooltip" data-placement="top"><i class="icon icon-gitee"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"RXHnFcNbbDpS4RzPQ4rf5KOC-gzGzoHsz",appKey:"OdMVqE4n2CdoeVAUG8bSTukn",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script><script>$(document).ready(function(){$("article img").not("[hidden]").not(".panel-body img").each(function(){var a,t,n=$(this),e=n.attr("alt"),r=n.parent("a");r.length<1&&(-1!=(t=(a=this.getAttribute("src")).lastIndexOf("?"))&&(a=a.substring(0,t)),r=n.wrap('<a href="'+a+'"></a>').parent("a")),r.attr("data-fancybox","images"),e&&r.attr("data-caption",e)}),$().fancybox({selector:'[data-fancybox="images"]',hash:!1,loop:!1})})</script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px;z-index:2}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>addLoadEvent(()=>{$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code")[0].innerText,n=document.createElement("textarea"),e=(document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus(),document.execCommand("copy"));document.body.removeChild(n),e?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})})</script></body></html>